# Antigravity Configuration

**Antigravity** エージェントコーディングアシスタントのための共有設定リポジトリです。このリポジトリは、複数のプロジェクト間で共有できるルール、ワークフロー、および設定を一元管理するために使用されます。

## 概要

このリポジトリが提供するもの:

- **グローバルルール**: `.antigravity.yml` に定義された、標準化されたコーディングガイドラインとエージェントの振る舞い。
- **ワークフロー**: `.agent/workflows` にある再利用可能なエージェントワークフロー（init, resume, save など）。
- **ユーザー設定**: エージェントとの対話設定をカスタマイズするためのテンプレート。

## 設計思想

この設定セットは、以下のコア原則に基づいて構築されています。

1.  **安全性と安定性**:
    破壊的な操作を防ぐことを最優先しています。エージェントによる一時ファイルの書き込みは `.agent/work` ディレクトリ内に厳密に制限されており、ソースコードの誤った変更やリポジトリの汚染を防ぎます。
2.  **世界標準と個人の快適さ**:
    多様なチームでの移植性を確保するため、ベースとなるルールやドキュメントは英語で統一されています。一方で、エージェントとの実際の対話は `config.yml` で定義されたユーザーの母国語を尊重します。
3.  **柔軟な導入**:
    中央集権的な管理を望むチームのための「厳格な同期（サブモジュールとシンボリックリンク）」と、カスタマイズを必要とするプロジェクトのための「選択的な導入（手動コピー）」の両方をサポートしています。

## 始め方

1. **サブモジュールとして追加**:
   プロジェクトのルートディレクトリで以下のコマンドを実行し、このリポジトリをサブモジュールとして追加してください。
   ```bash
   git submodule add https://github.com/asabon/antigravity-config.git .shared-config
   ```

2. **設定の適用**:
   以下のいずれかの方法で設定を適用してください。

   ### Option A: 自動リンク（推奨）
   セットアップスクリプトを実行してシンボリックリンクを作成します。これにより、常に最新の共有設定が反映されます。

   **Windows (PowerShell):**
   ```powershell
   ./.shared-config/scripts/setup.ps1
   ```

   **macOS / Linux:**
   ```bash
   chmod +x .shared-config/scripts/setup.sh
   ./.shared-config/scripts/setup.sh
   ```

   ### Option B: 手動コピー・参照運用
   ルールやワークフローを選別して取り込みたい場合:

   1. 手動セットアップスクリプトを実行して、支援用ワークフローをコピーします。
      ```powershell
      ./.shared-config/scripts/setup-manual.ps1  # Windows
      # または
      ./.shared-config/scripts/setup-manual.sh   # macOS / Linux
      ```
   2. AI エージェントを使って設定を比較・適用します。
      - チャットで `/check-updates` を実行します。
      - エージェントがプロジェクトと `.shared-config` の差分を表示します。
      - 必要なファイルのマージやコピーを指示してください（例: 「共通ルールを取り込んで」）。

3. **`.gitignore` の設定**:
   プロジェクトの `.gitignore` に以下を追加してください。
   ```gitignore
   .agent/work/
   .agent/config.yml
   ```

4. **設定のカスタマイズ**:
   手順2で自動生成された `.agent/config.yml` を編集して、言語設定等を変更してください。

## 使い方

この設定には標準的なエージェントワークフローが含まれています。チャットインターフェースで以下のスラッシュコマンドを使用することで実行できます。

- **/check-updates**: 共有設定サブモジュールの更新を確認します。
- **/init**: セッションを初期化します（ルールの読み込み、環境チェックなど）。
- **/save**: 現在の進捗状況をチェックポイントファイルに保存します。
- **/resume**: 最後に保存された進捗レポートから作業を再開します。

## ディレクトリ構成

```
.
├── .agent/
│   ├── config.yml.sample   # ユーザー固有設定のテンプレート
│   └── workflows/          # 共有エージェントワークフロー
├── .antigravity.yml        # コア設定とルール定義
├── README.md               # ドキュメント（英語）
└── README.ja.md            # このファイル（日本語）
```

## 貢献について

- このリポジトリ内のルールやドキュメントは **英語** で記述してください。
- 内部的なコミュニケーション（チャット等）は、ローカルの `config.yml` の設定に従います。
